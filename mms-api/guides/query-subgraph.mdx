---
title: 'Query the subgraph'
description: 'Exact schema and working queries for books, depth, and your orders.'
---

The subgraph exposes typed entities. Below are working examples aligned with the schema.

### Books (paginate)

```graphql
query Books($first: Int!, $skip: Int!) {
  books(first: $first, skip: $skip, orderBy: id) {
    id
    base {
      id
      symbol
      decimals
    }
    quote {
      id
      symbol
      decimals
    }
    unitSize
    makerPolicy {
      fee
      isFeeInQuote
    }
    takerPolicy {
      fee
      isFeeInQuote
    }
  }
}
```

### Depth by price level

```graphql
query Depth($book: ID!, $first: Int!) {
  book(id: $book) {
    id
    depths(first: $first, orderBy: tick, orderDirection: desc) {
      tick
      unitAmount
      baseAmount
      quoteAmount
    }
  }
}
```

### Open orders for a user in a book

```graphql
query MyOpenOrdersInBook($owner: Bytes!, $book: ID!) {
  openOrders(
    where: { owner: $owner, book: $book }
    orderBy: tick
    orderDirection: desc
  ) {
    id
    orderIndex
    tick
    unitAmount
    claimableQuoteAmount
    timestamp
  }
}
```

### Recent taker trades (takes) in a book

```graphql
query RecentTakes($book: ID!, $first: Int!) {
  takes(
    where: { book: $book }
    first: $first
    orderBy: timestamp
    orderDirection: desc
  ) {
    id
    timestamp
    trader
    inputToken {
      id
      symbol
    }
    outputToken {
      id
      symbol
    }
    inputAmount
    outputAmount
    amountUSD
    transaction {
      id
    }
  }
}
```

### Maker fills for a specific order

```graphql
query OrderFills($orderId: ID!) {
  openOrder(id: $orderId) {
    id
    tick
    price
    fills(orderBy: timestamp, orderDirection: asc) {
      id
      timestamp
      fillIndex
      inputAmount
      outputAmount
      amountUSD
      transaction {
        id
      }
    }
  }
}
```

### Maker fills for a user across all books

```graphql
query MakerFillsByUser($maker: Bytes!, $first: Int!) {
  makerFills(
    where: { maker: $maker }
    first: $first
    orderBy: timestamp
    orderDirection: desc
  ) {
    id
    timestamp
    book {
      id
      base {
        symbol
      }
      quote {
        symbol
      }
    }
    tick
    price
    inputAmount
    outputAmount
    amountUSD
    orderIdString
  }
}
```

### All trades for a given user in a book

```graphql
query UserTradesInBook($user: Bytes!, $book: ID!, $first: Int!) {
  trades(
    where: { trader: $user, book: $book }
    first: $first
    orderBy: timestamp
    orderDirection: desc
  ) {
    id
    type
    timestamp
    trader
    book {
      id
    }
    inputToken {
      id
      symbol
    }
    outputToken {
      id
      symbol
    }
    inputAmount
    outputAmount
    amountUSD
    logIndex
    transaction {
      id
    }
  }
}
```

### Claims for a specific order

```graphql
query OrderClaims($orderId: ID!) {
  openOrder(id: $orderId) {
    id
    tick
    price
    claims(orderBy: timestamp, orderDirection: asc) {
      id
      timestamp
      claimer
      owner
      claimedUnitAmount
      claimedBaseAmount
      claimedQuoteAmount
      claimedAmountUSD
      remainingClaimableUnitAmount
      remainingCancelableUnitAmount
      transaction {
        id
      }
    }
  }
}
```

### Claims by owner across all books

```graphql
query ClaimsByOwner($owner: Bytes!, $first: Int!) {
  claims(
    where: { owner: $owner }
    first: $first
    orderBy: timestamp
    orderDirection: desc
  ) {
    id
    timestamp
    book {
      id
      base {
        symbol
      }
      quote {
        symbol
      }
    }
    claimer
    orderIdString
    tick
    price
    claimedUnitAmount
    claimedBaseAmount
    claimedQuoteAmount
    claimedAmountUSD
    transaction {
      id
    }
  }
}
```
